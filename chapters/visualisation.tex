% !TeX encoding = UTF-8
% !TeX spellcheck = en_GB
% !TeX root = ../thesis.tex

\NewDocumentCommand{\codeword}{v}{%
	\texttt{#1}%}
	%\textcolor{blue}{
}

\chapter{Tracing and Visualization}
\label{chapter:tracing}
In this section we describe how we retrieve tracing data from the simulation, output the tracing data to files in a specific format, parse this format with other programs/languages for further analysis and how we visualize the simulation using external software.

\section{Basic Metrics of the Packet Flows}
The main source of our data are the Flow Summary Files. They are created manually by our function \codeword{traceMetricsSummary} in the tracing file.
Using the \codeword{ns3::FlowMonitor} we collect the following data:
\begin{itemize}
	\item Total number of transmitted packets for the flow (Tx Packets)
	\item Total number of transmitted bytes for the flow (Tx Bytes)
	\item Rate of transmitted bits for the flow (TxOffered)
	\item Total number of received bytes for the flow (Rx Bytes)
	\item Rate of recieved bits for the flow (Throughput)
	\item Mean delay per recieved packet for the flow (Mean delay)
	\item Mean jitter per recieved packet for the flow (Mean jitter)
\end{itemize}

With the function \codeword{traceNodeContainerIPs} we additionally store which nodes -- identified by their IP address -- are assigned to which slice (and which nodes are the base stations) during the simulation.

\todo{maybe sample flow file in codeblock/figure-env}

\section{Trace data of all Device Operations with Packets}
Using the PointToPointHelper and the AsciiTraceHelper of ns-3, we create a .tr file that contains one trace event per line. 
The first character in that line describes the operation that happened on the device queue and can be one of these:
\begin{itemize}
    \item \texttt{+} enqueue
    \item \texttt{-} dequeue
    \item \texttt{d} packet dropped
    \item \texttt{r} packet received
\end{itemize}
The next value, separated with a space, is the current simulation time in seconds.
More details about this format can be found in the ns-3 tutorials. \footnote[11]{\url{https://www.nsnam.org/docs/release/3.9/tutorial/tutorial_23.html##:~:text=5.3.1.1}}

\section{Tracing and 5G New Radio}
\section{Visualization in NetAnim}








